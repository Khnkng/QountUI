<style>
    .bold{
        font-weight: 700;
        color: #808CC5;
    }

    table{
        margin-top: 30px;
        border: 1px solid #f1f1f1;
    }

    thead{
        background: none;
    }

    th{
        color: #878787;
        font-size: 15px;
    }

    tr{
        height: 36px;
    }

    td, th{
        border-bottom: 1px solid #DCDEDD;
    }

    .header{
        color: #282895;
        text-align: center;
    }

    .company-name{
        font-weight: 800;
        font-size: 20px;
    }

    .report-name{
        font-size: 18px;
    }

    .criteria{
        font-size: 16px;
    }

    .text-left{
        text-align: left;
    }

    .text-center{
        text-align: center;
    }

    .text-right{
        text-align: right;
    }

    .heading-color{
        color: #808CC5;
        font-weight: 800;
    }
    .padding-20{
        padding-left: 20px;
    }
    .total-color{
        font-weight: 800;
    }
</style>
<div foundation class="income-detail-statement">

    <div class="report-wrapper" id="WrappedDetails" [hidden]="!allSections.showReportForm">
        <report-search-criteria [reportName]="'Detailed Income Statement'" [reportDesc]="'Detailed Income Statement.'"
                                [hideReportForm]="!allSections.showReportForm" [setReportType]="'incomeDetailStatement'"></report-search-criteria>
    </div>

    <div *ngIf="allSections.showReportData">
        <div class="float-right icons report-icon-header">
            <i class="icon ion-ios-email-outline" (click)="openemail()"></i>
            <i class="icon ion-ios-cloud-download-outline" data-toggle="export-dropdown"></i>
            <div class="dropdown-pane bottom" id="export-dropdown" data-dropdown data-hover="true" data-hover-pane="true" foundation>
                <div (click)="exportToExcel()" class="export-option">Export To Excel</div>
                <div (click)="exportToPDF()" class="export-option">Export To PDF</div>
            </div>
            <i class="icon ion-ios-printer-outline" (click)="printDiv()"></i>
        </div>
        <div class="printable-area">
            <div id="numeric">
                <div class="columns display-report" *ngIf="isSuccess">
                    <div style="text-align: center">
                        <div [ngClass]="customObj.customizations.headerAlignment" class="print-mode">
                            <div class="header company-name">{{companyName}}</div>
                            <div class="header report-name">{{reportName}}</div>
                            <div class="header criteria" *ngIf="customObj.customizations.includeReportPeriod">
                                As of {{reportPeriod}}
                            </div>
                        </div>
                        <table class="highlight-last-row report-table">
                            <thead>
                            <tr>
                                <th class="text-center" style="width: 40%">Number</th>
                                <th class="text-center" style="width: 12%">Date</th>
                                <th class="text-center" style="width: 12%">Category</th>
                                <th class="text-center" style="width: 12%">Debit</th>
                                <th class="text-center" style="width: 12%">Credit</th>
                                <th class="text-center" style="width: 12%">Running Balance</th>
                            </tr>
                            </thead>
                            <tbody>
                            <template ngFor [ngForOf]="rows" let-row="$implicit">
                                <tr>
                                    <td colspan="5" class="bold" class="text-left heading-color">{{result[row].displayName}}</td>
                                    <td></td>
                                </tr>
                                <template ngFor [ngForOf]="result[row].displayOrder" let-key="$implicit">
                                    <template ngFor [ngForOf]="getChartOfAccounts(result[row],key)" let-datarow="$implicit">
                                        <tr class="pointer">
                                            <td colspan="5" class="text-left padding-20" (click)="toggleCollapse(datarow['COA Number'])">
                                                {{datarow["COA Number"]}} - {{datarow["COA Name"]}}
                                            </td>
                                            <td class="text-right">
                                                <span class="display-mode" *ngIf="collapsedCOA.indexOf(datarow['COA Number']) != -1">
                                                    {{getFormattedAmount(datarow["Amount"])}}
                                                </span>
                                            </td>
                                        </tr>
                                        <tr *ngFor="let journal of datarow.journals" [hidden]="collapsedCOA.indexOf(datarow['COA Number']) != -1">
                                            <td style="padding-left: 40px;" class="text-left">{{journal.number}}</td>
                                            <td class="text-center">{{journal.date}}</td>
                                            <td class="text-center">{{categoryData[journal.category]}}</td>
                                            <td class="text-right">{{getFormattedAmount(journal.debit)}}</td>
                                            <td class="text-right">{{getFormattedAmount(journal.credit)}}</td>
                                            <td class="text-right">{{getFormattedAmount(journal.runningBalance)}}</td>
                                        </tr>
                                        <tr [hidden]="collapsedCOA.indexOf(datarow['COA Number']) != -1">
                                            <td colspan="5" style="padding-left: 20px;" class="text-left">
                                                Total {{datarow["COA Number"]}} - {{datarow["COA Name"]}}
                                            </td>
                                            <td class="text-right" style="font-weight: bold;">{{getFormattedAmount(datarow["Amount"])}}</td>
                                        </tr>
                                    </template>
                                    <tr *ngFor="let total of getTotals(result[row], key)">
                                        <td colspan="5" class="text-left total-color">{{total.displayName}}</td>
                                        <td class="text-right total-color">{{getFormattedAmount(total.value)}}</td>
                                    </tr>
                                </template>
                            </template>
                            </tbody>
                        </table>
                        <footer [ngClass]="customObj.customizations.footerAlignment">
                            <span *ngIf="customObj.customizations.includeDatePrepared">{{datePrepared}}</span>
                            <span *ngIf="customObj.customizations.includeTimePrepared">{{timePrepared}}</span>
                        </footer>
                    </div>
                </div>
                <div class="columns report-failure" *ngIf="isFailure">
                    <div>
                        <h4 class="report-heading">{{companyName}}</h4>
                        <h5 class="report-heading">Trail Balance Report</h5>
                        <h6 class="report-heading">As of {{displayDate}}</h6>
                        <div class="failure-text">This report does not contain any data.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="reveal medium bill-modal-container" #reportMail id="EmailModal" style="width: 900px;height:700px;" data-reveal data-close-on-click="false" data-animation-in="ease-in" data-animation-out="ease-out">
        <form (ngSubmit)="doEmail($event)" novalidate [formGroup]="emailForm">
            <div class="row">
                <div style="font-size: larger;font-weight: 800">Email Report</div>
            </div>
            <div class="row">
                <pre><label for="ToAddress" style="font-weight: 700;margin-top: 20px;">To    </label><br /></pre>
                <div class="small-16 columns" style="margin-top: 20px;">
                    <input formControlName="Toaddress" id="Toaddress" [tagsList]="[]" class="bighalf-tags,input, empty" name="name" type="text" value="" size="30" custom-tags /><br />
                </div>
            </div>
            <div class="row" *ngIf="showEmail">
                <pre><label for="cc" style="font-weight: 700">CC    </label><br /></pre>
                <div class="small-16 columns">
                    <input formControlName="cc" id="cc" [tagsList]="emailAddress"  class="bighalf-tags,input, empty" name="email" type="text" size="30" custom-tags /><br />
                </div>
            </div>
            <div class="row">
                <pre><label for="Emailsubject" style="font-weight: 700">Subject</label><br /></pre>
                <div class="small-16 columns">
                    <input formControlName="Emailsubject" id="Emailsubject" class="input" name="email" type="text" value="Your+'reportName" size="30" /><br />
                </div>
            </div>
            <div class="row">
                <pre><label style="font-weight: 700">Body   </label><br /></pre>
                <div class="small-16 columns">
                                    <textarea formControlName="EmailBody" rows="7" cols="50"  id="EmailBody">
                                        Hello, &#13;&#10;
                                        Attached is {{reportName}} &#13;&#10;
                                        Regards,&#13;&#10;
                                        {{user.first_name}} {{user.last_name}}
                                    </textarea><br />
                </div>
            </div>
            <div class="row">
                <pre><label for="report" style="font-weight:bolder">Report </label><br /></pre>
                <div class="small-16 columns">
                    <input id="report" class="input" name="Report" type="text" value="{{reportName}} report" size="30" /><br />
                </div>
            </div>
            <!--<button id="cancel_button" class="button" data-close aria-label="Close modal" style="float: left" >Cancel</button>-->
            <button class="button" style="float: right;" type="submit" data-close>Send</button>
        </form>
        <button class="close-button" data-close aria-label="Close reveal" type="button">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
</div>