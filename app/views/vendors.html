
<div class="row" foundation>
  <div class="column small-12 medium-6">
    <h5>Vendors</h5>
  </div>
  <div class="columns small-6 small-offset-6  medium-offset-0 medium-6 right">

  </div>
</div>
<div class="row" foundation>
  <div class="column large-12 medium-12 small-12 foo-container">
    <div class="foo-toolbar">
      <button class="button small" (click)="showCreateVendor()"><i class="icon ion-plus-round"></i>Vendor</button>
    </div>
    <foo-table #fooTableDir="fooTable" class="bighalf-footable" *ngIf="hasVendorsList" [data]="tableData" [options]="tableOptions" (onRowAction)="handleAction($event)"></foo-table>
  </div>
  <div class="small reveal" #createVendor id="createVendor" data-reveal data-close-on-click="false">
    <div class="row expanded">
      <h6>
        {{editMode ? "Update Vendor" : "Create Vendor"}}
      </h6>
      <form *ngIf="active1" (ngSubmit)="submit($event)" [formGroup]="vendorForm">
        <div class="row">
          <div class="small-12 medium-6 columns">
            <label>Name
              <div class="input-group">
                <input class="input-group-field" type="text" formControlName="name" placeholder="Legal Company Name*">
                <div class="error" [hidden]="vendorForm.controls.name.untouched || vendorForm.controls.name.valid">Vendor Name is required.</div>
              </div>
            </label>
          </div>
          <div class="small-12 medium-6 columns">
            <label>EIN
              <div class="input-group">
                <input class="input-group-field" type="text" formControlName="ein" placeholder="EIN*">
                <div class="error" [hidden]="vendorForm.controls.ein.untouched || vendorForm.controls.ein.valid">Vendor EIN is required.</div>
              </div>
            </label>
          </div>
          <!--<div class="small-12 medium-3 columns">
            <label>Currency
              <div class="input-group">
                <select formControlName="currency" placeholder="currency">
                  <option *ngFor="let currency of currencies" value="{{currency}}">{{currency}}</option>
                </select>
                <div class="error" [hidden]="vendorForm.controls.currency.untouched || vendorForm.controls.currency.valid"><smal>Select Currency</div>
              </div>
            </label>
          </div>-->
        </div>
        <div class="row">
          <div class="small-12 medium-6 columns">
            <label>Account Number(s)
              <div class="input-group">
                <custom-tag [controlName]="'accountNumbers'" [group]="vendorForm" [inputType]="'text'"
                            [height]="'80px'" [placeholder]="'Account number'">loading</custom-tag>
              </div>
            </label>
          </div>
          <div class="small-12 medium-6 columns">
            <label>Email
              <div class="input-group">
                <input class="input-group-field" type="text" formControlName="email" placeholder="Email*" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$"/>
                <div class="error" *ngIf="vendorForm.controls.email.touched && vendorForm.controls.email.hasError('required')">Vendor email is required.</div>
                <div class="error" *ngIf="vendorForm.controls.email.touched && vendorForm.controls.email.hasError('pattern')">Invalid email format.</div>
              </div>
            </label>
          </div>
        </div>

        <div class="row">
          <div class="small-12 medium-6 columns">
            <label>Phone Number
              <div class="input-group">
                <input class="input-group-field" type="text" formControlName="phoneNumber" placeholder="Phone Number*">
                <div class="error" [hidden]="vendorForm.controls.phoneNumber.untouched || vendorForm.controls.phoneNumber.valid">Phone Number is required.</div>
              </div>
            </label>
          </div>

          <div class="small-12 medium-6 columns">
            <label>Country
              <div class="input-group">
                <select combo-box #vendorCountryComboBoxDir="comboBox" title="" data-placeholder="Enter Country" formControlName="country" [listObject]="countries" (valueChanged)="showVendorProvince($event)">
                  <option *ngFor="let country of countries" [value]="country.name">{{country.name}}</option>
                </select>
                <div class="error" [hidden]="vendorForm.controls.country.untouched || vendorForm.controls.country.valid">Country is required.</div>
              </div>
            </label>
          </div>
          <Address *ngIf="showAddress" [code]="countryCode" #addressDir="address"></Address>
          <div class="small-12 medium-6 columns">
            <label>Please select a payment method.
              <select placeholder="Payment Method" formControlName="paymentMethod">
                <option [value]="'ach'">ACH</option>
                <option [value]="'digitalCheque'">Digital Cheque</option>
                <option [value]="'mailCheque'">Mail Cheque</option>
              </select>
              <div class="error" [hidden]="vendorForm.controls.paymentMethod.untouched || vendorForm.controls.paymentMethod.valid">Payment method required.</div>
            </label>
          </div>
          <div class="small-12 medium-6 columns">
            <label>COA
              <div class="input-group">
                <select combo-box #coaComboBoxDir="comboBox" title="" data-placeholder="Enter COA" formControlName="coa" [listObject]="chartOfAccounts" (valueChanged)="showCOA($event)">
                  <option *ngFor="let coa1 of chartOfAccounts" [value]="coa1.name">{{coa1.name}}</option>
                </select>
                <div class="error" [hidden]="vendorForm.controls.coa.untouched || vendorForm.controls.coa.valid">COA is required.</div>
              </div>
            </label>
          </div>
          <div class="small-12 medium-6 columns">
            <label> &nbsp;
              <div class="input-group">
                <input type="checkbox" class="input-group-field" formControlName="has1099" /> Eligible 1099
                <div class="error" [hidden]="vendorForm.controls.has1099.untouched || vendorForm.controls.has1099.valid">Eligible for 1099 is required.</div>
              </div>
            </label>
          </div>
        </div>

        <div class="row">
          <div class="small-12 medium-12 columns">
            <button class="button create small float-right" [disabled]="!vendorForm.valid || !addressValid()" type="submit" (click)="submit($event)" data-close>{{editMode?"Update":"Add"}}</button>
          </div>
        </div>
        <!--<div *ngIf="status" class="formstatus">
          <span [ngClass]="{'success': status.success, 'error': status.error}">{{message}}</span>
        </div>-->
      </form>
      <button class="close-button" data-close aria-label="Close reveal" type="button">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  </div>
</div>
